{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport React, { Component } from 'react';\nimport { db, auth } from \"../../firebase/config\";\nimport firebase from 'firebase';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Comments = function (_Component) {\n  _inherits(Comments, _Component);\n\n  var _super = _createSuper(Comments);\n\n  function Comments(props) {\n    var _this;\n\n    _classCallCheck(this, Comments);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      comentarios: [],\n      nuevoComentario: ''\n    };\n    return _this;\n  }\n\n  _createClass(Comments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var idDoc = this.props.route.params.id;\n      console.log(idDoc);\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(elComentario) {\n      var _this2 = this;\n\n      var comment = {\n        owner: auth.currentUser.email,\n        createdAt: Date.now(),\n        description: elComentario\n      };\n\n      if (elComentario !== '') {\n        db.collection('messages').doc(this.props.route.params.id).update({\n          subMessages: firebase.firestore.FieldValue.arrayUnion(comment)\n        }).then(function (response) {\n          return _this2.setState({\n            nuevoComentario: ''\n          });\n        }).catch(function (error) {\n          return console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return _jsxs(View, {\n        children: [_jsx(FlatList, {\n          data: this.state.comentarios,\n          keyExtractor: function keyExtractor(item) {\n            return item.createdAt.toString();\n          },\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item;\n            return _jsx(Text, {\n              children: item.description\n            });\n          }\n        }), _jsxs(View, {\n          children: [_jsx(TextInput, {\n            placeholder: \"Agrega tu comentario\",\n            onChangeText: function onChangeText(text) {\n              return _this3.setState({\n                nuevoComentario: text\n              });\n            },\n            value: this.state.nuevoComentario,\n            keyboardType: \"default\",\n            style: styles.inputComment\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this3.onSubmit(_this3.state.nuevoComentario);\n            },\n            style: styles.btnComment,\n            children: _jsx(Text, {\n              children: \"Enviar\"\n            })\n          })]\n        })]\n      });\n    }\n  }]);\n\n  return Comments;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  containerSubmessage: {\n    flexDirection: 'row',\n    width: '90%'\n  },\n  inputComment: {\n    borderWidth: 1,\n    backgroundColor: '#c3c3c3',\n    width: '80%'\n  },\n  btnComment: {\n    width: '20%',\n    padding: 10,\n    backgroundColor: '#d3d3d3'\n  }\n});\nexport default Comments;","map":{"version":3,"names":["React","Component","db","auth","firebase","Comments","props","state","comentarios","nuevoComentario","idDoc","route","params","id","console","log","elComentario","comment","owner","currentUser","email","createdAt","Date","now","description","collection","doc","update","subMessages","firestore","FieldValue","arrayUnion","then","response","setState","catch","error","item","toString","text","styles","inputComment","onSubmit","btnComment","StyleSheet","create","container","width","height","justifyContent","alignItems","containerSubmessage","flexDirection","borderWidth","backgroundColor","padding"],"sources":["/home/carlos/Documents/develop/DH/0322UNPRO3CM02ARMO/clase-15-agregar_y_obtener_datos/src/screens/Comments/index.js"],"sourcesContent":["import { View, Text, FlatList, TouchableOpacity, TextInput, StyleSheet } from 'react-native'\nimport React, {Component} from 'react'\nimport { db, auth } from '../../firebase/config'\nimport firebase from 'firebase'\n\nclass Comments extends Component {\n    constructor(props){\n        super(props)\n        this.state={\n            comentarios:[],\n            nuevoComentario:''\n        } \n    }\n\n    componentDidMount(){\n        const idDoc = this.props.route.params.id\nconsole.log(idDoc)\n        // db.collection('messages').doc(idDoc).onSnapshot(doc => {\n        //     console.log(doc)\n        // })\n        // .catch(error => console.log(error))\n    }\n\n    onSubmit(elComentario){\n        const comment ={\n            owner: auth.currentUser.email,\n            createdAt: Date.now(),\n            description: elComentario\n        }\n\n        if(elComentario !== ''){\n            db\n            .collection('messages')\n            .doc(this.props.route.params.id)\n            .update({\n                subMessages:firebase.firestore.FieldValue.arrayUnion(comment)\n            })\n            .then(response => this.setState({nuevoComentario:''}))\n            .catch(error => console.log(error))\n        }\n\n    }\n    \n    render(){\n        return (\n          <View>\n            <FlatList\n            data={this.state.comentarios}\n            keyExtractor={( item ) => item.createdAt.toString()}\n            renderItem={ ( {item} ) => <Text>{item.description}</Text>}\n            />\n            <View>\n                <TextInput\n                placeholder='Agrega tu comentario'\n                onChangeText={(text) => this.setState({nuevoComentario : text})}\n                value={this.state.nuevoComentario}\n                keyboardType='default'\n                style={styles.inputComment}\n                />\n                <TouchableOpacity \n                onPress={()=> this.onSubmit(this.state.nuevoComentario)}\n                style={styles.btnComment}\n                >\n                    <Text>Enviar</Text>\n                </TouchableOpacity>\n            </View>\n          </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container:{\n      width:'100%',\n      height:'100%',\n      justifyContent:'center',\n      alignItems:'center'\n    },\n    containerSubmessage:{\n      flexDirection:'row',\n      width:'90%'\n    },\n    inputComment:{\n      borderWidth:1,\n      backgroundColor:'#c3c3c3',\n      width:'80%'\n    },\n    btnComment:{\n      width:'20%',\n      padding:10,\n      backgroundColor:'#d3d3d3'\n  \n    }\n  })\n\nexport default Comments"],"mappings":"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"},"metadata":{},"sourceType":"module"}