{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport React, { Component } from 'react';\nimport { db, auth } from \"../../firebase/config\";\nimport firebase from 'firebase';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Comments = function (_Component) {\n  _inherits(Comments, _Component);\n\n  var _super = _createSuper(Comments);\n\n  function Comments(props) {\n    var _this;\n\n    _classCallCheck(this, Comments);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      comentarios: [],\n      nuevoComentario: ''\n    };\n    return _this;\n  }\n\n  _createClass(Comments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var idDoc = this.props.route.params.id;\n      db.collection('messages').doc(idDoc).onSnapshot(function (doc) {\n        _this2.setState({\n          comentarios: doc.data().subMessages\n        });\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(elComentario) {\n      var _this3 = this;\n\n      var comment = {\n        owner: auth.currentUser.email,\n        createdAt: Date.now(),\n        description: elComentario\n      };\n\n      if (elComentario !== '') {\n        db.collection('messages').doc(this.props.route.params.id).update({\n          subMessages: firebase.firestore.FieldValue.arrayUnion(comment)\n        }).then(function (response) {\n          return _this3.setState({\n            nuevoComentario: ''\n          });\n        }).catch(function (error) {\n          return console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(FlatList, {\n          data: this.state.comentarios,\n          keyExtractor: function keyExtractor(item) {\n            return item.createdAt.toString();\n          },\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item;\n            return _jsxs(View, {\n              style: styles.comment,\n              children: [_jsx(Text, {\n                children: item.owner\n              }), _jsx(Text, {\n                children: item.description\n              })]\n            });\n          }\n        }), _jsxs(View, {\n          children: [_jsx(TextInput, {\n            placeholder: \"Agrega tu comentario\",\n            onChangeText: function onChangeText(text) {\n              return _this4.setState({\n                nuevoComentario: text\n              });\n            },\n            value: this.state.nuevoComentario,\n            keyboardType: \"default\",\n            style: styles.inputComment\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this4.onSubmit(_this4.state.nuevoComentario);\n            },\n            style: styles.btnComment,\n            children: _jsx(Text, {\n              children: \"Enviar\"\n            })\n          })]\n        })]\n      });\n    }\n  }]);\n\n  return Comments;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  comment: {\n    marginTop: 30\n  },\n  containerComment: {\n    flexDirection: 'row',\n    width: '90%'\n  },\n  inputComment: {\n    borderWidth: 1,\n    backgroundColor: '#c3c3c3',\n    width: '80%'\n  },\n  btnComment: {\n    width: '20%',\n    padding: 10,\n    backgroundColor: '#d3d3d3'\n  }\n});\nexport default Comments;","map":{"version":3,"names":["React","Component","db","auth","firebase","Comments","props","state","comentarios","nuevoComentario","idDoc","route","params","id","collection","doc","onSnapshot","setState","data","subMessages","elComentario","comment","owner","currentUser","email","createdAt","Date","now","description","update","firestore","FieldValue","arrayUnion","then","response","catch","error","console","log","styles","container","item","toString","text","inputComment","onSubmit","btnComment","StyleSheet","create","width","height","justifyContent","alignItems","marginTop","containerComment","flexDirection","borderWidth","backgroundColor","padding"],"sources":["C:/Users/DH/Desktop/Facu/0322UNPRO3CT03ARMO/clase22-Flexbox-where-limit-orderby/demo/src/screens/Comments/index.js"],"sourcesContent":["import { View, Text, FlatList, TouchableOpacity, TextInput, StyleSheet } from 'react-native'\r\nimport React, {Component} from 'react'\r\nimport { db, auth } from '../../firebase/config'\r\nimport firebase from 'firebase'\r\n\r\nclass Comments extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            comentarios:[],\r\n            nuevoComentario:''\r\n        } \r\n    }\r\n\r\n    componentDidMount(){\r\n        const idDoc = this.props.route.params.id\r\n            db\r\n            .collection('messages')\r\n            .doc(idDoc)\r\n            .onSnapshot(doc => {\r\n                this.setState({\r\n                    comentarios:doc.data().subMessages\r\n                })\r\n            })\r\n    }\r\n\r\n    onSubmit(elComentario){\r\n        const comment ={\r\n            owner: auth.currentUser.email,\r\n            createdAt: Date.now(),\r\n            description: elComentario\r\n        }\r\n\r\n        if(elComentario !== ''){\r\n            db\r\n            .collection('messages')\r\n            .doc(this.props.route.params.id)\r\n            .update({\r\n                subMessages:firebase.firestore.FieldValue.arrayUnion(comment)\r\n            })\r\n            .then(response => this.setState({nuevoComentario:''}))\r\n            .catch(error => console.log(error))\r\n        }\r\n\r\n    }\r\n    \r\n    render(){\r\n        return (\r\n          <View style={styles.container}>\r\n            <FlatList\r\n            data={this.state.comentarios}\r\n            keyExtractor={( item ) => item.createdAt.toString()}\r\n            renderItem={ ( {item} ) => <View style={styles.comment}>\r\n                <Text>{item.owner}</Text>\r\n                <Text>{item.description}</Text>\r\n            </View>\r\n        }\r\n            />\r\n            <View>\r\n                <TextInput\r\n                placeholder='Agrega tu comentario'\r\n                onChangeText={\r\n                    (text) => this.setState({nuevoComentario : text})\r\n                }\r\n                value={this.state.nuevoComentario}\r\n                keyboardType='default'\r\n                style={styles.inputComment}\r\n                />\r\n                <TouchableOpacity \r\n                onPress={()=> this.onSubmit(this.state.nuevoComentario)}\r\n                style={styles.btnComment}\r\n                >\r\n                    <Text>Enviar</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        )\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n      width:'100%',\r\n      height:'100%',\r\n      justifyContent:'center',\r\n      alignItems:'center'\r\n    },\r\n    comment:{\r\n        marginTop:30\r\n    },\r\n    containerComment:{\r\n      flexDirection:'row',\r\n      width:'90%'\r\n    },\r\n    inputComment:{\r\n      borderWidth:1,\r\n      backgroundColor:'#c3c3c3',\r\n      width:'80%'\r\n    },\r\n    btnComment:{\r\n      width:'20%',\r\n      padding:10,\r\n      backgroundColor:'#d3d3d3'\r\n  \r\n    }\r\n  })\r\n\r\nexport default Comments"],"mappings":"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"},"metadata":{},"sourceType":"module"}