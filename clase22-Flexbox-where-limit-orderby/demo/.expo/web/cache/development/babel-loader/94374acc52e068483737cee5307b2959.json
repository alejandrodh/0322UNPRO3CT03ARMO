{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport React, { Component } from 'react';\nimport { auth, db } from \"../../firebase/config\";\nimport firebase from 'firebase';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Submessages = function (_Component) {\n  _inherits(Submessages, _Component);\n\n  var _super = _createSuper(Submessages);\n\n  function Submessages(props) {\n    var _this;\n\n    _classCallCheck(this, Submessages);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      allSubmessages: [],\n      inputNewSubmessage: ''\n    };\n    return _this;\n  }\n\n  _createClass(Submessages, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(this.props);\n      var docId = this.props.route.params.docId;\n      db.collection('messages').doc(docId).onSnapshot(function (doc) {\n        _this2.setState({\n          allSubmessages: doc.data().subMessages\n        });\n      });\n    }\n  }, {\n    key: \"enviarSubmessage\",\n    value: function enviarSubmessage(submessageText) {\n      var _this3 = this;\n\n      var docId = this.props.route.params.docId;\n\n      if (this.state.newSubmessage === '') {\n        return '';\n      }\n\n      var newSubmessage = {\n        owner: auth.currentUser.email,\n        submessageText: submessageText,\n        createdAt: Date.now()\n      };\n      db.collection('messages').doc(docId).update({\n        subMessages: firebase.firestore.FieldValue.arrayUnion(newSubmessage)\n      }).then(function () {\n        return _this3.setState({\n          inputNewSubmessage: ''\n        });\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"eliminarSubmessage\",\n    value: function eliminarSubmessage(index) {\n      var docId = this.props.route.params.docId;\n      db.collection('messages').doc(docId).update({\n        subMessages: firebase.firestore.FieldValue.arrayRemove(index)\n      }).then(function (response) {\n        return console.log(response);\n      }).catch(function (error) {\n        return console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(FlatList, {\n          data: this.state.allSubmessages,\n          keyExtractor: function keyExtractor(item, index) {\n            return item.createdAt.toString();\n          },\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item,\n                index = _ref.index;\n            return _jsxs(View, {\n              children: [_jsx(Text, {\n                children: item.submessageText\n              }), _jsx(TouchableOpacity, {\n                onPress: function onPress() {\n                  console.log(index);\n\n                  _this4.eliminarSubmessage(index);\n                },\n                children: _jsx(Text, {\n                  children: \"Borrar\"\n                })\n              })]\n            });\n          }\n        }), _jsxs(View, {\n          style: styles.containerSubmessage,\n          children: [_jsx(TextInput, {\n            placeholder: \"Agrega tu Submessage\",\n            onChangeText: function onChangeText(text) {\n              return _this4.setState({\n                inputNewSubmessage: text\n              });\n            },\n            value: this.state.inputNewSubmessage,\n            style: styles.inputSubmessage\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this4.enviarSubmessage(_this4.state.inputNewSubmessage);\n            },\n            style: styles.btnSubmessage,\n            children: _jsx(Text, {\n              children: \"Enviar\"\n            })\n          })]\n        })]\n      });\n    }\n  }]);\n\n  return Submessages;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  containerSubmessage: {\n    flexDirection: 'row',\n    width: '90%'\n  },\n  inputSubmessage: {\n    borderWidth: 1,\n    backgroundColor: '#c3c3c3',\n    width: '80%'\n  },\n  btnSubmessage: {\n    width: '20%',\n    padding: 10,\n    backgroundColor: '#d3d3d3'\n  }\n});\nexport default Submessages;","map":{"version":3,"names":["React","Component","auth","db","firebase","Submessages","props","state","allSubmessages","inputNewSubmessage","console","log","docId","route","params","collection","doc","onSnapshot","setState","data","subMessages","submessageText","newSubmessage","owner","currentUser","email","createdAt","Date","now","update","firestore","FieldValue","arrayUnion","then","catch","error","index","arrayRemove","response","styles","container","item","toString","eliminarSubmessage","containerSubmessage","text","inputSubmessage","enviarSubmessage","btnSubmessage","StyleSheet","create","width","height","justifyContent","alignItems","flexDirection","borderWidth","backgroundColor","padding"],"sources":["/home/carlos/Documents/develop/DH/0322UNPRO3CM02ARMO/clase-15-agregar_y_obtener_datos/src/screens/Submessages/index.js"],"sourcesContent":["import { View, Text, TextInput, TouchableOpacity, FlatList, StyleSheet } from 'react-native'\nimport React, {Component} from 'react'\nimport {auth, db} from '../../firebase/config'\nimport firebase from 'firebase'\n\n\nclass Submessages extends Component {\n  constructor(props){\n    super(props)\n    this.state={\n      allSubmessages:[],\n      inputNewSubmessage:'',\n    }\n  }\n\n  componentDidMount(){\n    console.log(this.props)\n    const {docId} = this.props.route.params\n    db.collection('messages').doc(docId).onSnapshot(\n      doc => {\n        // console.log(doc.data())\n        this.setState({\n          allSubmessages: doc.data().subMessages\n        })\n      }\n    )\n  }\n  enviarSubmessage(submessageText){\n    const {docId} = this.props.route.params\n    if(this.state.newSubmessage === ''){\n      return ''\n    }\n    const newSubmessage = {\n      owner: auth.currentUser.email,\n      submessageText: submessageText,\n      createdAt: Date.now()\n    }\n    db.collection('messages').doc(docId).update({\n      subMessages: firebase.firestore.FieldValue.arrayUnion(newSubmessage)\n    })\n    .then(()=> this.setState({inputNewSubmessage:''}))\n    .catch(error=> console.log(error))\n  }\n\n  eliminarSubmessage(index){\n    const {docId} = this.props.route.params\n    db.collection('messages').doc(docId).update({\n      subMessages: firebase.firestore.FieldValue.arrayRemove(index)\n    })\n    .then(response => console.log(response))\n    .catch(error => console.log(error))\n  }\n  render(){\n    return (\n      <View style={styles.container}>\n        <FlatList\n        data={this.state.allSubmessages}\n        keyExtractor={(item, index) => item.createdAt.toString()}\n        renderItem={({item, index})=>{\n          return(\n            <View>\n              <Text>{item.submessageText}</Text>\n              <TouchableOpacity onPress={()=> {\n                console.log(index)\n                this.eliminarSubmessage(index)\n                }}>\n                <Text>Borrar</Text>\n              </TouchableOpacity>\n            </View>\n          )\n          }\n        }\n        />\n        <View style={styles.containerSubmessage}>\n          <TextInput\n          placeholder='Agrega tu Submessage'\n          onChangeText={text => this.setState({inputNewSubmessage: text})}\n          value={this.state.inputNewSubmessage}\n          style={styles.inputSubmessage}\n          />\n          <TouchableOpacity\n          onPress={()=> this.enviarSubmessage(this.state.inputNewSubmessage)}\n          style={styles.btnSubmessage}\n          >\n            <Text>Enviar</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    )\n  }\n}\nconst styles = StyleSheet.create({\n  container:{\n    width:'100%',\n    height:'100%',\n    justifyContent:'center',\n    alignItems:'center'\n  },\n  containerSubmessage:{\n    flexDirection:'row',\n    width:'90%'\n  },\n  inputSubmessage:{\n    borderWidth:1,\n    backgroundColor:'#c3c3c3',\n    width:'80%'\n  },\n  btnSubmessage:{\n    width:'20%',\n    padding:10,\n    backgroundColor:'#d3d3d3'\n\n  }\n})\nexport default Submessages"],"mappings":"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"},"metadata":{},"sourceType":"module"}